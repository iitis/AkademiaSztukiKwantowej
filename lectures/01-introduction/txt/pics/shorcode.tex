\documentclass[multi=my,varwidth=false,preview]{standalone}
\usepackage{tikz}
\usetikzlibrary{quantikz}
\begin{document}
\begin{my}
    \begin{quantikz}
        \lstick{$\ket{\psi}$}   & \ctrl{3} & \ctrl{6} & \gate{H} & \ctrl{1} & \ctrl{2} & \gate[9, style={fill=red!20}]{E} & \ctrl{1}   & \ctrl{2} & \targ{}   & \gate{H} & \ctrl{3} & \ctrl{6} & \targ{}   & \rstick{$\ket{\psi}$} \qw\\
        \lstick{$\ket{0}$}      & \qw      & \qw      & \qw      & \targ{}  & \qw      &             & \targ{}    & \qw      & \ctrl{-1} & \qw      & \qw      & \qw      & \qw       & \qw \\
        \lstick{$\ket{0}$}      & \qw      & \qw      & \qw      & \qw      & \targ{}    &             & \qw      & \targ{}  & \ctrl{-2} & \qw      & \qw      & \qw      & \qw       & \qw \\
        \lstick{$\ket{0}$}      & \targ{}  & \qw      & \gate{H} & \ctrl{1} & \ctrl{2} &             & \ctrl{1}   & \ctrl{2} & \targ{}   & \gate{H} & \targ{}  & \qw      & \ctrl{-3} & \qw \\
        \lstick{$\ket{0}$}      & \qw      & \qw      & \qw      & \targ{}  & \qw      &             & \targ{}    & \qw      & \ctrl{-1} & \qw      & \qw      & \qw      & \qw       & \qw \\
        \lstick{$\ket{0}$}      & \qw      & \qw      & \qw      & \qw      & \targ{}    &             & \qw      & \targ{}  & \ctrl{-2} & \qw      & \qw      & \qw      & \qw       & \qw \\
        \lstick{$\ket{0}$}      & \qw      & \targ{}  & \gate{H} & \ctrl{1} & \ctrl{2} &             & \ctrl{1}   & \ctrl{2} & \targ{}   & \gate{H} & \qw      & \targ{}  & \ctrl{-6} & \qw \\
        \lstick{$\ket{0}$}      & \qw      & \qw      & \qw      & \targ{}  & \qw      &             & \targ{}    & \qw      & \ctrl{-1} & \qw      & \qw      & \qw      & \qw       & \qw \\
        \lstick{$\ket{0}$}      & \qw      & \qw      & \qw      & \qw      & \targ{}    &             & \qw      & \targ{}  & \ctrl{-2} & \qw      & \qw      & \qw      & \qw       & \qw
    \end{quantikz}
\end{my}
\end{document}
